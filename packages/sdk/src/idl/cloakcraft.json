{
  "address": "DsCP619hPxpvY1SKfCqoKMB7om52UJBKBewevvoNN7Ha",
  "metadata": {
    "name": "cloakcraft",
    "version": "0.1.0",
    "spec": "0.1.0"
  },
  "instructions": [
    {
      "name": "append_verification_key_data",
      "docs": [
        "Append verification key data to an existing account",
        "Used for chunked upload of large VKs"
      ],
      "discriminator": [
        21,
        242,
        226,
        2,
        197,
        148,
        11,
        181
      ],
      "accounts": [
        {
          "name": "verification_key",
          "docs": [
            "Verification key account (must already be initialized)",
            "Realloc to max size to support larger VK updates"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "arg",
                "path": "circuit_id"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true,
          "relations": [
            "verification_key"
          ]
        },
        {
          "name": "payer",
          "docs": [
            "Payer for reallocation"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program for reallocation"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "circuit_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "data_chunk",
          "type": "bytes"
        }
      ]
    },
    {
      "name": "cancel_order",
      "docs": [
        "Cancel an order"
      ],
      "discriminator": [
        95,
        129,
        237,
        240,
        8,
        49,
        223,
        132
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "commitment_counter",
          "docs": [
            "Commitment counter for this pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "pool"
              }
            ]
          }
        },
        {
          "name": "order",
          "docs": [
            "Order being cancelled"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  111,
                  114,
                  100,
                  101,
                  114
                ]
              },
              {
                "kind": "arg",
                "path": "order_id"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer/maker (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "escrow_nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "order_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "refund_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "encrypted_note",
          "type": "bytes"
        },
        {
          "name": "light_params",
          "type": {
            "option": {
              "defined": {
                "name": "LightCancelOrderParams"
              }
            }
          }
        }
      ]
    },
    {
      "name": "close_pending_operation",
      "docs": [
        "Close pending operation after all nullifiers and commitments created or expired"
      ],
      "discriminator": [
        251,
        131,
        94,
        64,
        37,
        41,
        43,
        157
      ],
      "accounts": [
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (receives rent back)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        }
      ]
    },
    {
      "name": "create_aggregation",
      "docs": [
        "Create a voting aggregation"
      ],
      "discriminator": [
        108,
        186,
        50,
        39,
        7,
        25,
        242,
        146
      ],
      "accounts": [
        {
          "name": "aggregation",
          "docs": [
            "Aggregation account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  103,
                  103,
                  114,
                  101,
                  103,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "arg",
                "path": "id"
              }
            ]
          }
        },
        {
          "name": "token_pool",
          "docs": [
            "Token pool (for verifying voting power) (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "token_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "threshold_pubkey",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "threshold",
          "type": "u8"
        },
        {
          "name": "num_options",
          "type": "u8"
        },
        {
          "name": "deadline",
          "type": "i64"
        },
        {
          "name": "action_domain",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        }
      ]
    },
    {
      "name": "create_commitment",
      "docs": [
        "Create a commitment for a pending operation",
        "",
        "This is a generic instruction that can be used by any multi-phase operation",
        "to create commitments one at a time. Each call creates ONE commitment to stay",
        "within transaction size limits.",
        "",
        "IMPORTANT: All nullifiers must be created before any commitments."
      ],
      "discriminator": [
        232,
        31,
        118,
        65,
        229,
        2,
        2,
        170
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool for this commitment"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "commitment_counter",
          "docs": [
            "Commitment counter for the pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "pool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (must be same as operation creator)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "commitment_index",
          "type": "u8"
        },
        {
          "name": "stealth_ephemeral_pubkey",
          "type": {
            "array": [
              "u8",
              64
            ]
          }
        },
        {
          "name": "encrypted_note",
          "type": "bytes"
        },
        {
          "name": "light_params",
          "type": {
            "defined": {
              "name": "LightCreateCommitmentParams"
            }
          }
        }
      ]
    },
    {
      "name": "create_nullifier",
      "docs": [
        "Create a nullifier for a pending operation",
        "",
        "This is a generic instruction that can be used by any multi-phase operation",
        "to create nullifiers one at a time. Each call creates ONE nullifier to stay",
        "within transaction size limits.",
        "",
        "Must be called after the operation's Phase 1 (e.g., add_liquidity) and before",
        "any commitments can be created."
      ],
      "discriminator": [
        171,
        144,
        50,
        154,
        87,
        170,
        57,
        66
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool for this nullifier"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (must be same as operation creator)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier_index",
          "type": "u8"
        },
        {
          "name": "light_params",
          "type": {
            "defined": {
              "name": "LightCreateNullifierParams"
            }
          }
        }
      ]
    },
    {
      "name": "create_nullifier_and_pending",
      "docs": [
        "Create Nullifier and Pending Operation Phase 2 (GENERIC)",
        "",
        "CRITICAL POINT: After this, nullifier exists and outputs MUST be created.",
        "Works for ALL operations: transfer, swap, add/remove liquidity, market.",
        "",
        "Phase 2: Create nullifier from pending operation (APPEND PATTERN)",
        "",
        "SECURITY: Reads nullifier from PendingOperation (created in Phase 0).",
        "This prevents nullifier swap attacks - attacker cannot substitute a different nullifier.",
        "",
        "For multi-input operations (add_liquidity), call this instruction multiple times:",
        "- First call with nullifier_index=0 for input A",
        "- Second call with nullifier_index=1 for input B"
      ],
      "discriminator": [
        72,
        148,
        152,
        177,
        52,
        246,
        217,
        202
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool for this nullifier"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (from Phase 0)",
            "Note: commitment_verified and nullifier_created constraints removed - now checked per-input via bitmask in function"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for nullifier creation, must match pending operation)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier_index",
          "type": "u8"
        },
        {
          "name": "light_params",
          "type": {
            "defined": {
              "name": "LightCreateNullifierAndPendingParams"
            }
          }
        }
      ]
    },
    {
      "name": "create_order",
      "docs": [
        "Create a limit order"
      ],
      "discriminator": [
        141,
        54,
        37,
        207,
        237,
        210,
        250,
        215
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool for the offer token (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "commitment_counter",
          "docs": [
            "Commitment counter for this pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "pool"
              }
            ]
          }
        },
        {
          "name": "order",
          "docs": [
            "Order account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  111,
                  114,
                  100,
                  101,
                  114
                ]
              },
              {
                "kind": "arg",
                "path": "order_id"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "payer",
          "docs": [
            "Payer (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "order_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "escrow_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "terms_hash",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "expiry",
          "type": "i64"
        },
        {
          "name": "encrypted_escrow",
          "type": "bytes"
        },
        {
          "name": "light_params",
          "type": {
            "option": {
              "defined": {
                "name": "LightOrderParams"
              }
            }
          }
        }
      ]
    },
    {
      "name": "create_pending_with_proof",
      "docs": [
        "Create Pending with Proof Phase 0 - verify ZK proof and create PendingOperation (Transfer-specific)",
        "",
        "Append Pattern multi-phase operation flow:",
        "Phase 0 (this): Verify ZK proof + Create PendingOperation (binds all phases)",
        "Phase 1: Verify commitment exists (GENERIC, binds to Phase 0)",
        "Phase 2: Create nullifier (GENERIC, binds to Phase 0)",
        "Phase 3: Process unshield (operation-specific)",
        "Phase 4+: Create commitments (GENERIC)",
        "Final: Close pending operation (GENERIC)",
        "",
        "SECURITY: ZK proof verified, binding fields stored in PendingOperation.",
        "Fee amount is a public input verified in the ZK proof."
      ],
      "discriminator": [
        115,
        102,
        69,
        37,
        52,
        183,
        212,
        240
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key for the circuit"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (created in this instruction)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for PDA creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "merkle_root",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "input_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "out_commitments",
          "type": {
            "vec": {
              "array": [
                "u8",
                32
              ]
            }
          }
        },
        {
          "name": "output_recipients",
          "type": {
            "vec": {
              "array": [
                "u8",
                32
              ]
            }
          }
        },
        {
          "name": "output_amounts",
          "type": {
            "vec": "u64"
          }
        },
        {
          "name": "output_randomness",
          "type": {
            "vec": {
              "array": [
                "u8",
                32
              ]
            }
          }
        },
        {
          "name": "stealth_ephemeral_pubkeys",
          "type": {
            "vec": {
              "array": [
                "u8",
                64
              ]
            }
          }
        },
        {
          "name": "unshield_amount",
          "type": "u64"
        },
        {
          "name": "fee_amount",
          "type": "u64"
        }
      ]
    },
    {
      "name": "create_pending_with_proof_add_liquidity",
      "docs": [
        "Create Pending with Proof Phase 0 - Add Liquidity (Append Pattern)",
        "",
        "Flow:",
        "Phase 0 (this): Verify ZK proof + Create PendingOperation",
        "Phase 1a: verify_commitment_exists(index=0) for deposit A",
        "Phase 1b: verify_commitment_exists(index=1) for deposit B",
        "Phase 2a: create_nullifier_and_pending(index=0) for deposit A",
        "Phase 2b: create_nullifier_and_pending(index=1) for deposit B",
        "Phase 3: execute_add_liquidity to update AMM state",
        "Phase 4+: create_commitment for LP token and change outputs",
        "Final: close_pending_operation"
      ],
      "discriminator": [
        65,
        218,
        153,
        125,
        62,
        172,
        209,
        39
      ],
      "accounts": [
        {
          "name": "pool_a",
          "docs": [
            "Token A pool (for deposit A)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_a.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pool_b",
          "docs": [
            "Token B pool (for deposit B)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_b.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "lp_pool",
          "docs": [
            "LP token pool (where LP tokens are minted to)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "lp_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool state"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key for the add liquidity circuit"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (created in this instruction)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for PDA creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "input_commitment_a",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "input_commitment_b",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier_a",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier_b",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "lp_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "change_a_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "change_b_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "deposit_a",
          "type": "u64"
        },
        {
          "name": "deposit_b",
          "type": "u64"
        },
        {
          "name": "lp_amount",
          "type": "u64"
        },
        {
          "name": "min_lp_amount",
          "type": "u64"
        },
        {
          "name": "num_commitments",
          "type": "u8"
        }
      ]
    },
    {
      "name": "create_pending_with_proof_remove_liquidity",
      "docs": [
        "Create Pending with Proof Phase 0 - Remove Liquidity (Append Pattern)",
        "",
        "Flow:",
        "Phase 0 (this): Verify ZK proof + Create PendingOperation",
        "Phase 1: verify_commitment_exists for LP input",
        "Phase 2: create_nullifier_and_pending for LP input",
        "Phase 3: execute_remove_liquidity to update AMM state",
        "Phase 4+: create_commitment for token outputs",
        "Final: close_pending_operation"
      ],
      "discriminator": [
        60,
        19,
        211,
        251,
        49,
        5,
        103,
        176
      ],
      "accounts": [
        {
          "name": "lp_pool",
          "docs": [
            "LP token pool (where LP tokens are burned from)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "lp_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pool_a",
          "docs": [
            "Token A pool (where output A goes)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_a.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pool_b",
          "docs": [
            "Token B pool (where output B goes)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_b.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool state"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key for the remove liquidity circuit"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (created in this instruction)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for PDA creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "lp_input_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "lp_nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "out_a_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "out_b_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "old_state_hash",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "new_state_hash",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "lp_amount_burned",
          "type": "u64"
        },
        {
          "name": "withdraw_a_amount",
          "type": "u64"
        },
        {
          "name": "withdraw_b_amount",
          "type": "u64"
        },
        {
          "name": "num_commitments",
          "type": "u8"
        }
      ]
    },
    {
      "name": "create_pending_with_proof_swap",
      "docs": [
        "Create Pending with Proof Phase 0 - Swap (Append Pattern)",
        "",
        "Flow:",
        "Phase 0 (this): Verify ZK proof + Create PendingOperation",
        "Phase 1: verify_commitment_exists for input",
        "Phase 2: create_nullifier_and_pending for input",
        "Phase 3: execute_swap to update AMM state",
        "Phase 4+: create_commitment for outputs",
        "Final: close_pending_operation"
      ],
      "discriminator": [
        250,
        231,
        89,
        171,
        94,
        41,
        47,
        245
      ],
      "accounts": [
        {
          "name": "input_pool",
          "docs": [
            "Input token pool (where the input commitment is spent from)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "input_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "output_pool",
          "docs": [
            "Output token pool (where the swapped tokens go)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "output_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool state"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key for the swap circuit"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (created in this instruction)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for PDA creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "merkle_root",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "input_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "out_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "change_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "min_output",
          "type": "u64"
        },
        {
          "name": "swap_amount",
          "type": "u64"
        },
        {
          "name": "output_amount",
          "type": "u64"
        },
        {
          "name": "swap_a_to_b",
          "type": "bool"
        },
        {
          "name": "num_commitments",
          "type": "u8"
        }
      ]
    },
    {
      "name": "disable_adapt_module",
      "docs": [
        "Disable an adapter module"
      ],
      "discriminator": [
        226,
        114,
        232,
        9,
        230,
        15,
        68,
        225
      ],
      "accounts": [
        {
          "name": "adapt_module",
          "docs": [
            "Adapter module"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  100,
                  97,
                  112,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "adapt_module.program_id",
                "account": "AdaptModule"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true,
          "relations": [
            "adapt_module"
          ]
        }
      ],
      "args": []
    },
    {
      "name": "execute_add_liquidity",
      "docs": [
        "Execute Add Liquidity Phase 3 - Update AMM state (Append Pattern)",
        "",
        "Must be called after verify_commitment_exists and create_nullifier_and_pending for both deposits.",
        "Updates AMM pool reserves and LP supply based on verified liquidity addition."
      ],
      "discriminator": [
        31,
        200,
        193,
        210,
        136,
        205,
        216,
        24
      ],
      "accounts": [
        {
          "name": "pool_a",
          "docs": [
            "Token A pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_a.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pool_b",
          "docs": [
            "Token B pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_b.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "lp_pool",
          "docs": [
            "LP token pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "lp_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool state (will be updated)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (from Phase 0)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (must match pending operation)"
          ],
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "min_lp_amount",
          "type": "u64"
        }
      ]
    },
    {
      "name": "execute_remove_liquidity",
      "docs": [
        "Execute Remove Liquidity Phase 3 - Update AMM state (Append Pattern)",
        "",
        "Must be called after verify_commitment_exists and create_nullifier_and_pending.",
        "Updates AMM pool reserves and LP supply based on verified liquidity removal."
      ],
      "discriminator": [
        21,
        226,
        243,
        31,
        221,
        192,
        31,
        201
      ],
      "accounts": [
        {
          "name": "lp_pool",
          "docs": [
            "LP token pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "lp_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pool_a",
          "docs": [
            "Token A pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_a.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pool_b",
          "docs": [
            "Token B pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool_b.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool state (will be updated)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (from Phase 0)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (must match pending operation)"
          ],
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "new_state_hash",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        }
      ]
    },
    {
      "name": "execute_swap",
      "docs": [
        "Execute Swap Phase 3 - Update AMM state (Append Pattern)",
        "",
        "Must be called after verify_commitment_exists and create_nullifier_and_pending.",
        "Updates AMM pool reserves based on verified swap."
      ],
      "discriminator": [
        56,
        182,
        124,
        215,
        155,
        140,
        157,
        102
      ],
      "accounts": [
        {
          "name": "input_pool",
          "docs": [
            "Input token pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "input_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "output_pool",
          "docs": [
            "Output token pool (for reference)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "output_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool state (will be updated)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (from Phase 0)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (must match pending operation)"
          ],
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        }
      ]
    },
    {
      "name": "fill_order",
      "docs": [
        "Fill an order atomically"
      ],
      "discriminator": [
        232,
        122,
        115,
        25,
        199,
        143,
        136,
        162
      ],
      "accounts": [
        {
          "name": "maker_pool",
          "docs": [
            "Maker's offer token pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "maker_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "maker_commitment_counter",
          "docs": [
            "Commitment counter for maker pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "maker_pool"
              }
            ]
          }
        },
        {
          "name": "taker_pool",
          "docs": [
            "Taker's payment token pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "taker_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "taker_commitment_counter",
          "docs": [
            "Commitment counter for taker pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "taker_pool"
              }
            ]
          }
        },
        {
          "name": "order",
          "docs": [
            "Order being filled"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  111,
                  114,
                  100,
                  101,
                  114
                ]
              },
              {
                "kind": "arg",
                "path": "order_id"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "maker_proof",
          "type": "bytes"
        },
        {
          "name": "taker_proof",
          "type": "bytes"
        },
        {
          "name": "escrow_nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "taker_nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "order_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "maker_out_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "taker_out_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "encrypted_notes",
          "type": {
            "vec": "bytes"
          }
        },
        {
          "name": "light_params",
          "type": {
            "option": {
              "defined": {
                "name": "LightFillOrderParams"
              }
            }
          }
        }
      ]
    },
    {
      "name": "finalize_decryption",
      "docs": [
        "Finalize decryption and reveal results"
      ],
      "discriminator": [
        221,
        43,
        73,
        44,
        144,
        239,
        130,
        54
      ],
      "accounts": [
        {
          "name": "aggregation",
          "docs": [
            "Aggregation"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  103,
                  103,
                  114,
                  101,
                  103,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "account",
                "path": "aggregation.id",
                "account": "Aggregation"
              }
            ]
          }
        },
        {
          "name": "finalizer",
          "docs": [
            "Anyone can finalize once threshold is met"
          ],
          "signer": true
        }
      ],
      "args": [
        {
          "name": "totals",
          "type": {
            "vec": "u64"
          }
        }
      ]
    },
    {
      "name": "initialize_amm_pool",
      "docs": [
        "Initialize a liquidity pool"
      ],
      "discriminator": [
        20,
        58,
        19,
        89,
        14,
        193,
        139,
        31
      ],
      "accounts": [
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "arg",
                "path": "token_a_mint"
              },
              {
                "kind": "arg",
                "path": "token_b_mint"
              }
            ]
          }
        },
        {
          "name": "lp_mint",
          "docs": [
            "LP token mint (created as regular mint with amm_pool as authority)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "token_a_mint_account",
          "docs": [
            "Token A mint"
          ]
        },
        {
          "name": "token_b_mint_account",
          "docs": [
            "Token B mint"
          ]
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        },
        {
          "name": "token_program",
          "docs": [
            "Token program"
          ],
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        },
        {
          "name": "rent",
          "docs": [
            "Rent"
          ],
          "address": "SysvarRent111111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "token_a_mint",
          "type": "pubkey"
        },
        {
          "name": "token_b_mint",
          "type": "pubkey"
        },
        {
          "name": "fee_bps",
          "type": "u16"
        }
      ]
    },
    {
      "name": "initialize_commitment_counter",
      "docs": [
        "Initialize commitment counter for a pool",
        "",
        "Must be called after initialize_pool to enable commitment tracking."
      ],
      "discriminator": [
        158,
        181,
        246,
        128,
        22,
        64,
        90,
        146
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool to initialize counter for"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "commitment_counter",
          "docs": [
            "Commitment counter PDA"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "pool"
              }
            ]
          }
        },
        {
          "name": "payer",
          "docs": [
            "Payer for account creation"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "initialize_pool",
      "docs": [
        "Initialize a new shielded pool for a token"
      ],
      "discriminator": [
        95,
        180,
        10,
        172,
        84,
        174,
        232,
        40
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool account to initialize (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "token_mint"
              }
            ]
          }
        },
        {
          "name": "token_vault",
          "docs": [
            "Token vault PDA"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "token_mint"
              }
            ]
          }
        },
        {
          "name": "token_mint",
          "docs": [
            "Token mint"
          ]
        },
        {
          "name": "authority",
          "docs": [
            "Pool authority"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        },
        {
          "name": "token_program",
          "docs": [
            "Token program"
          ],
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        },
        {
          "name": "rent",
          "docs": [
            "Rent sysvar"
          ],
          "address": "SysvarRent111111111111111111111111111111111"
        }
      ],
      "args": []
    },
    {
      "name": "initialize_protocol_config",
      "docs": [
        "Initialize protocol configuration with fee rates",
        "",
        "Creates the global ProtocolConfig account. Can only be called once.",
        "Fee rates are in basis points (10 = 0.1%, 100 = 1%, 1000 = 10% max)."
      ],
      "discriminator": [
        28,
        50,
        43,
        233,
        244,
        98,
        123,
        118
      ],
      "accounts": [
        {
          "name": "protocol_config",
          "docs": [
            "Protocol config account (singleton PDA)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "treasury",
          "docs": [
            "Treasury account that will receive fees"
          ]
        },
        {
          "name": "authority",
          "docs": [
            "Authority that can update config (typically a multisig or governance)"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer for account creation"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "transfer_fee_bps",
          "type": "u16"
        },
        {
          "name": "unshield_fee_bps",
          "type": "u16"
        },
        {
          "name": "swap_fee_bps",
          "type": "u16"
        },
        {
          "name": "remove_liquidity_fee_bps",
          "type": "u16"
        },
        {
          "name": "fees_enabled",
          "type": "bool"
        }
      ]
    },
    {
      "name": "process_unshield",
      "docs": [
        "Process Unshield Phase 3 - process unshield only (Transfer-specific)",
        "",
        "Must be called after create_nullifier_and_pending (Phase 2) and before create_commitment (Phase 4+).",
        "This phase has NO Light Protocol CPI calls.",
        "",
        "NOTE: Encrypted notes are NOT stored in PDA (saves ~1680 bytes).",
        "SDK must regenerate encrypted notes in Phase 4 from randomness stored in PendingOperation."
      ],
      "discriminator": [
        139,
        41,
        106,
        165,
        62,
        234,
        120,
        132
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "token_vault",
          "docs": [
            "Token vault (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "protocol_config",
          "docs": [
            "Protocol config (optional - if fees are enabled, boxed to reduce stack usage)"
          ],
          "optional": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "treasury_token_account",
          "docs": [
            "Treasury token account for receiving fees (optional - required if fee_amount > 0)"
          ],
          "writable": true,
          "optional": true
        },
        {
          "name": "unshield_recipient",
          "docs": [
            "Unshield recipient (optional, boxed to reduce stack usage)"
          ],
          "writable": true,
          "optional": true
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (must match operation creator)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "token_program",
          "docs": [
            "Token program"
          ],
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "unshield_amount",
          "type": "u64"
        }
      ]
    },
    {
      "name": "register_adapt_module",
      "docs": [
        "Register an adapter module"
      ],
      "discriminator": [
        106,
        98,
        19,
        132,
        158,
        99,
        214,
        47
      ],
      "accounts": [
        {
          "name": "adapt_module",
          "docs": [
            "Adapter module account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  100,
                  97,
                  112,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "adapter_program"
              }
            ]
          }
        },
        {
          "name": "adapter_program",
          "docs": [
            "Adapter program"
          ]
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "interface_version",
          "type": "u8"
        }
      ]
    },
    {
      "name": "register_threshold_committee",
      "docs": [
        "Register a threshold committee"
      ],
      "discriminator": [
        93,
        46,
        75,
        78,
        68,
        136,
        109,
        217
      ],
      "accounts": [
        {
          "name": "committee",
          "docs": [
            "Committee account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  116,
                  101,
                  101
                ]
              },
              {
                "kind": "arg",
                "path": "committee_id"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "committee_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "members",
          "type": {
            "vec": "pubkey"
          }
        },
        {
          "name": "threshold_pubkey",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "threshold",
          "type": "u8"
        }
      ]
    },
    {
      "name": "register_verification_key",
      "docs": [
        "Register a verification key for a circuit"
      ],
      "discriminator": [
        252,
        136,
        235,
        8,
        197,
        79,
        40,
        67
      ],
      "accounts": [
        {
          "name": "verification_key",
          "docs": [
            "Verification key account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "arg",
                "path": "circuit_id"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true
        },
        {
          "name": "payer",
          "docs": [
            "Payer"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "circuit_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "vk_data",
          "type": "bytes"
        }
      ]
    },
    {
      "name": "reset_amm_pool",
      "docs": [
        "Reset AMM pool state (admin only)",
        "Used to fix corrupted pool state"
      ],
      "discriminator": [
        67,
        206,
        131,
        179,
        253,
        87,
        240,
        165
      ],
      "accounts": [
        {
          "name": "amm_pool",
          "docs": [
            "AMM pool to reset"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  109,
                  109,
                  95,
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "amm_pool.token_a_mint",
                "account": "AmmPool"
              },
              {
                "kind": "account",
                "path": "amm_pool.token_b_mint",
                "account": "AmmPool"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Pool authority (must match)"
          ],
          "signer": true,
          "relations": [
            "amm_pool"
          ]
        }
      ],
      "args": []
    },
    {
      "name": "set_verification_key_data",
      "docs": [
        "Set verification key data on an existing account",
        "Used for large VKs that exceed transaction size limits"
      ],
      "discriminator": [
        117,
        234,
        100,
        99,
        128,
        32,
        44,
        101
      ],
      "accounts": [
        {
          "name": "verification_key",
          "docs": [
            "Verification key account (must already be initialized)",
            "Realloc to max size to support larger VK updates"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "arg",
                "path": "circuit_id"
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority"
          ],
          "signer": true,
          "relations": [
            "verification_key"
          ]
        },
        {
          "name": "payer",
          "docs": [
            "Payer for reallocation"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "system_program",
          "docs": [
            "System program for reallocation"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "circuit_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "vk_data",
          "type": "bytes"
        }
      ]
    },
    {
      "name": "shield",
      "docs": [
        "Shield tokens - deposit public tokens into the shielded pool",
        "",
        "Uses Light Protocol compressed accounts for commitment storage.",
        "The light_params enable on-chain commitment storage via Light Protocol.",
        "The stealth_ephemeral_pubkey is stored so recipient can derive",
        "the stealth private key for decryption."
      ],
      "discriminator": [
        220,
        198,
        253,
        246,
        231,
        84,
        147,
        98
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool to shield into (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "commitment_counter",
          "docs": [
            "Commitment counter for this pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "pool"
              }
            ]
          }
        },
        {
          "name": "token_vault",
          "docs": [
            "Token vault"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "user_token_account",
          "docs": [
            "User's token account (source)"
          ],
          "writable": true
        },
        {
          "name": "user",
          "docs": [
            "User (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "token_program",
          "docs": [
            "Token program"
          ],
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": [
        {
          "name": "commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "amount",
          "type": "u64"
        },
        {
          "name": "stealth_ephemeral_pubkey",
          "type": {
            "array": [
              "u8",
              64
            ]
          }
        },
        {
          "name": "encrypted_note",
          "type": "bytes"
        },
        {
          "name": "light_params",
          "type": {
            "option": {
              "defined": {
                "name": "LightCommitmentParams"
              }
            }
          }
        }
      ]
    },
    {
      "name": "store_commitment",
      "docs": [
        "Store a commitment as a Light Protocol compressed account",
        "",
        "Called after transact to persist commitments on-chain.",
        "Can be called in separate transactions to avoid size limits."
      ],
      "discriminator": [
        188,
        162,
        140,
        134,
        138,
        242,
        159,
        54
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer/submitter (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "params",
          "type": {
            "defined": {
              "name": "StoreCommitmentParams"
            }
          }
        }
      ]
    },
    {
      "name": "submit_decryption_share",
      "docs": [
        "Submit a decryption share"
      ],
      "discriminator": [
        212,
        242,
        109,
        214,
        14,
        242,
        247,
        228
      ],
      "accounts": [
        {
          "name": "aggregation",
          "docs": [
            "Aggregation"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  103,
                  103,
                  114,
                  101,
                  103,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "account",
                "path": "aggregation.id",
                "account": "Aggregation"
              }
            ]
          }
        },
        {
          "name": "committee",
          "docs": [
            "Threshold committee"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  116,
                  101,
                  101
                ]
              },
              {
                "kind": "account",
                "path": "committee.committee_id",
                "account": "ThresholdCommittee"
              }
            ]
          }
        },
        {
          "name": "member",
          "docs": [
            "Committee member submitting share"
          ],
          "signer": true
        }
      ],
      "args": [
        {
          "name": "shares",
          "type": {
            "vec": {
              "array": [
                "u8",
                32
              ]
            }
          }
        },
        {
          "name": "dleq_proofs",
          "type": {
            "vec": "bytes"
          }
        }
      ]
    },
    {
      "name": "submit_encrypted",
      "docs": [
        "Submit an encrypted vote",
        "",
        "Uses Light Protocol for action nullifier storage to prevent double-voting."
      ],
      "discriminator": [
        6,
        248,
        180,
        151,
        28,
        199,
        198,
        16
      ],
      "accounts": [
        {
          "name": "aggregation",
          "docs": [
            "Aggregation"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  103,
                  103,
                  114,
                  101,
                  103,
                  97,
                  116,
                  105,
                  111,
                  110
                ]
              },
              {
                "kind": "account",
                "path": "aggregation.id",
                "account": "Aggregation"
              }
            ]
          }
        },
        {
          "name": "pool",
          "docs": [
            "Token pool (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Voter/relayer (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "merkle_root",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "action_nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "encrypted_votes",
          "type": {
            "vec": {
              "array": [
                "u8",
                64
              ]
            }
          }
        },
        {
          "name": "light_params",
          "type": {
            "option": {
              "defined": {
                "name": "LightVoteParams"
              }
            }
          }
        }
      ]
    },
    {
      "name": "test_verify_proof",
      "docs": [
        "Test proof verification (development only)",
        "Verifies a proof without pool state checks"
      ],
      "discriminator": [
        252,
        208,
        59,
        22,
        178,
        59,
        46,
        253
      ],
      "accounts": [
        {
          "name": "verification_key",
          "docs": [
            "The verification key account"
          ]
        },
        {
          "name": "payer",
          "docs": [
            "Payer for the transaction"
          ],
          "signer": true
        }
      ],
      "args": [
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "public_inputs",
          "type": {
            "vec": {
              "array": [
                "u8",
                32
              ]
            }
          }
        }
      ]
    },
    {
      "name": "transact",
      "docs": [
        "Transact Phase 1 (DEPRECATED) - private transfer with optional unshield",
        "",
        "DEPRECATED: Use the new multi-phase flow instead:",
        "1. verify_proof_for_transact (Phase 0)",
        "2. verify_commitment_for_transact (Phase 1)",
        "3. create_nullifier (Phase 2)",
        "4. process_unshield (Phase 3)",
        "5. create_commitment (Phase 4+)",
        "6. close_pending_operation (Final)",
        "",
        "This old instruction exceeds transaction size limits and should not be used."
      ],
      "discriminator": [
        217,
        149,
        130,
        143,
        221,
        52,
        252,
        119
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (created in this instruction)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "token_vault",
          "docs": [
            "Token vault"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key for the circuit (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "unshield_recipient",
          "docs": [
            "Unshield recipient (optional, can be any account)"
          ],
          "writable": true,
          "optional": true
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer/submitter (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "token_program",
          "docs": [
            "Token program"
          ],
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        },
        {
          "name": "system_program",
          "docs": [
            "System program"
          ],
          "address": "11111111111111111111111111111111"
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "merkle_root",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "input_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "out_commitments",
          "type": {
            "vec": {
              "array": [
                "u8",
                32
              ]
            }
          }
        },
        {
          "name": "encrypted_notes",
          "type": {
            "vec": "bytes"
          }
        },
        {
          "name": "unshield_amount",
          "type": "u64"
        },
        {
          "name": "num_commitments",
          "type": "u8"
        },
        {
          "name": "light_params",
          "type": {
            "defined": {
              "name": "LightTransactParams"
            }
          }
        }
      ]
    },
    {
      "name": "transact_adapt",
      "docs": [
        "Transact via adapter - swap through external DEX"
      ],
      "discriminator": [
        240,
        109,
        123,
        193,
        132,
        96,
        145,
        122
      ],
      "accounts": [
        {
          "name": "input_pool",
          "docs": [
            "Input token pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "input_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "output_pool",
          "docs": [
            "Output token pool (boxed to reduce stack usage)"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "output_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "output_commitment_counter",
          "docs": [
            "Commitment counter for output pool"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  99,
                  111,
                  109,
                  109,
                  105,
                  116,
                  109,
                  101,
                  110,
                  116,
                  95,
                  99,
                  111,
                  117,
                  110,
                  116,
                  101,
                  114
                ]
              },
              {
                "kind": "account",
                "path": "output_pool"
              }
            ]
          }
        },
        {
          "name": "input_vault",
          "docs": [
            "Input token vault"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "input_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "output_vault",
          "docs": [
            "Output token vault"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  97,
                  117,
                  108,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "output_pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "adapt_module",
          "docs": [
            "Adapter module"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  97,
                  100,
                  97,
                  112,
                  116
                ]
              },
              {
                "kind": "account",
                "path": "adapt_module.program_id",
                "account": "AdaptModule"
              }
            ]
          }
        },
        {
          "name": "verification_key",
          "docs": [
            "Verification key (boxed to reduce stack usage)"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  118,
                  107
                ]
              },
              {
                "kind": "account",
                "path": "verification_key.circuit_id",
                "account": "VerificationKey"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for compressed account creation)"
          ],
          "writable": true,
          "signer": true
        },
        {
          "name": "token_program",
          "docs": [
            "Token program"
          ],
          "address": "TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"
        }
      ],
      "args": [
        {
          "name": "proof",
          "type": "bytes"
        },
        {
          "name": "nullifier",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "input_amount",
          "type": "u64"
        },
        {
          "name": "min_output",
          "type": "u64"
        },
        {
          "name": "adapt_params",
          "type": "bytes"
        },
        {
          "name": "out_commitment",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "encrypted_note",
          "type": "bytes"
        },
        {
          "name": "light_params",
          "type": {
            "option": {
              "defined": {
                "name": "LightAdaptParams"
              }
            }
          }
        }
      ]
    },
    {
      "name": "update_protocol_authority",
      "docs": [
        "Transfer protocol authority to a new account",
        "",
        "Only callable by the current authority."
      ],
      "discriminator": [
        207,
        19,
        17,
        100,
        133,
        169,
        89,
        253
      ],
      "accounts": [
        {
          "name": "protocol_config",
          "docs": [
            "Protocol config account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "new_authority",
          "docs": [
            "New authority"
          ]
        },
        {
          "name": "authority",
          "docs": [
            "Current authority"
          ],
          "signer": true,
          "relations": [
            "protocol_config"
          ]
        }
      ],
      "args": []
    },
    {
      "name": "update_protocol_fees",
      "docs": [
        "Update protocol fee rates",
        "",
        "Only callable by the protocol authority. Allows updating individual",
        "fee rates or toggling fees on/off."
      ],
      "discriminator": [
        158,
        219,
        253,
        143,
        54,
        45,
        113,
        182
      ],
      "accounts": [
        {
          "name": "protocol_config",
          "docs": [
            "Protocol config account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "authority",
          "docs": [
            "Authority that can update fees"
          ],
          "signer": true,
          "relations": [
            "protocol_config"
          ]
        }
      ],
      "args": [
        {
          "name": "transfer_fee_bps",
          "type": {
            "option": "u16"
          }
        },
        {
          "name": "unshield_fee_bps",
          "type": {
            "option": "u16"
          }
        },
        {
          "name": "swap_fee_bps",
          "type": {
            "option": "u16"
          }
        },
        {
          "name": "remove_liquidity_fee_bps",
          "type": {
            "option": "u16"
          }
        },
        {
          "name": "fees_enabled",
          "type": {
            "option": "bool"
          }
        }
      ]
    },
    {
      "name": "update_treasury",
      "docs": [
        "Update protocol treasury address",
        "",
        "Only callable by the protocol authority. Changes where fees are sent."
      ],
      "discriminator": [
        60,
        16,
        243,
        66,
        96,
        59,
        254,
        131
      ],
      "accounts": [
        {
          "name": "protocol_config",
          "docs": [
            "Protocol config account"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  114,
                  111,
                  116,
                  111,
                  99,
                  111,
                  108,
                  95,
                  99,
                  111,
                  110,
                  102,
                  105,
                  103
                ]
              }
            ]
          }
        },
        {
          "name": "new_treasury",
          "docs": [
            "New treasury account"
          ]
        },
        {
          "name": "authority",
          "docs": [
            "Authority that can update treasury"
          ],
          "signer": true,
          "relations": [
            "protocol_config"
          ]
        }
      ],
      "args": []
    },
    {
      "name": "verify_commitment_exists",
      "docs": [
        "Verify Commitment Exists Phase 1 - verify commitment in Light Protocol state tree (GENERIC)",
        "",
        "SECURITY CRITICAL: This prevents spending non-existent commitments.",
        "Works for ALL spend operations: transfer, swap, remove liquidity, market operations.",
        "",
        "This phase uses Light Protocol CPI with inclusion proof (~8 Light accounts).",
        "NO state changes - if fails, no cleanup needed.",
        "",
        "For multi-input operations (add_liquidity), call this instruction multiple times:",
        "- First call with commitment_index=0 for input A",
        "- Second call with commitment_index=1 for input B"
      ],
      "discriminator": [
        126,
        11,
        155,
        178,
        177,
        176,
        157,
        136
      ],
      "accounts": [
        {
          "name": "pool",
          "docs": [
            "Pool"
          ],
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  111,
                  111,
                  108
                ]
              },
              {
                "kind": "account",
                "path": "pool.token_mint",
                "account": "Pool"
              }
            ]
          }
        },
        {
          "name": "pending_operation",
          "docs": [
            "Pending operation PDA (from Phase 0)",
            "Note: commitment_verified constraint removed - now checked per-input via bitmask in function"
          ],
          "writable": true,
          "pda": {
            "seeds": [
              {
                "kind": "const",
                "value": [
                  112,
                  101,
                  110,
                  100,
                  105,
                  110,
                  103,
                  95,
                  111,
                  112
                ]
              },
              {
                "kind": "arg",
                "path": "operation_id"
              }
            ]
          }
        },
        {
          "name": "relayer",
          "docs": [
            "Relayer (pays for Light Protocol CPI, must match pending operation)"
          ],
          "writable": true,
          "signer": true
        }
      ],
      "args": [
        {
          "name": "operation_id",
          "type": {
            "array": [
              "u8",
              32
            ]
          }
        },
        {
          "name": "commitment_index",
          "type": "u8"
        },
        {
          "name": "light_params",
          "type": {
            "defined": {
              "name": "LightVerifyCommitmentParams"
            }
          }
        }
      ]
    }
  ],
  "accounts": [
    {
      "name": "AdaptModule",
      "discriminator": [
        104,
        31,
        171,
        41,
        105,
        229,
        28,
        169
      ]
    },
    {
      "name": "Aggregation",
      "discriminator": [
        10,
        158,
        173,
        174,
        129,
        182,
        140,
        31
      ]
    },
    {
      "name": "AmmPool",
      "discriminator": [
        54,
        82,
        185,
        138,
        179,
        191,
        211,
        169
      ]
    },
    {
      "name": "Order",
      "discriminator": [
        134,
        173,
        223,
        185,
        77,
        86,
        28,
        51
      ]
    },
    {
      "name": "PendingOperation",
      "discriminator": [
        124,
        146,
        84,
        123,
        121,
        210,
        217,
        118
      ]
    },
    {
      "name": "Pool",
      "discriminator": [
        241,
        154,
        109,
        4,
        17,
        177,
        109,
        188
      ]
    },
    {
      "name": "PoolCommitmentCounter",
      "discriminator": [
        104,
        144,
        242,
        34,
        19,
        153,
        118,
        196
      ]
    },
    {
      "name": "ProtocolConfig",
      "discriminator": [
        207,
        91,
        250,
        28,
        152,
        179,
        215,
        209
      ]
    },
    {
      "name": "ThresholdCommittee",
      "discriminator": [
        28,
        130,
        118,
        105,
        148,
        110,
        97,
        147
      ]
    },
    {
      "name": "VerificationKey",
      "discriminator": [
        57,
        106,
        137,
        188,
        100,
        187,
        148,
        137
      ]
    }
  ],
  "errors": [
    {
      "code": 6000,
      "name": "InvalidProof",
      "msg": "Invalid zero-knowledge proof"
    },
    {
      "code": 6001,
      "name": "ProofVerificationFailed",
      "msg": "Proof verification failed"
    },
    {
      "code": 6002,
      "name": "InvalidPublicInputs",
      "msg": "Invalid public inputs for proof"
    },
    {
      "code": 6003,
      "name": "InvalidMerkleRoot",
      "msg": "Merkle root not found in current or historical roots"
    },
    {
      "code": 6004,
      "name": "TreeFull",
      "msg": "Merkle tree is full"
    },
    {
      "code": 6005,
      "name": "InvalidMerkleProof",
      "msg": "Invalid merkle proof"
    },
    {
      "code": 6006,
      "name": "NullifierAlreadyUsed",
      "msg": "Nullifier has already been used"
    },
    {
      "code": 6007,
      "name": "InvalidNullifier",
      "msg": "Invalid nullifier derivation"
    },
    {
      "code": 6008,
      "name": "InvalidCommitment",
      "msg": "Invalid commitment"
    },
    {
      "code": 6009,
      "name": "CommitmentExists",
      "msg": "Commitment already exists"
    },
    {
      "code": 6010,
      "name": "CommitmentNotFound",
      "msg": "Commitment not found in Light Protocol state tree"
    },
    {
      "code": 6011,
      "name": "CommitmentInclusionFailed",
      "msg": "Commitment inclusion proof verification failed"
    },
    {
      "code": 6012,
      "name": "CommitmentAccountHashMismatch",
      "msg": "Commitment account hash does not match derived address"
    },
    {
      "code": 6013,
      "name": "CommitmentMismatch",
      "msg": "Commitment value mismatch"
    },
    {
      "code": 6014,
      "name": "InsufficientBalance",
      "msg": "Insufficient balance"
    },
    {
      "code": 6015,
      "name": "AmountOverflow",
      "msg": "Amount overflow"
    },
    {
      "code": 6016,
      "name": "InvalidAmount",
      "msg": "Invalid amount"
    },
    {
      "code": 6017,
      "name": "InvalidTokenMint",
      "msg": "Invalid token mint"
    },
    {
      "code": 6018,
      "name": "TokenMintMismatch",
      "msg": "Token mint mismatch"
    },
    {
      "code": 6019,
      "name": "PoolAlreadyInitialized",
      "msg": "Pool already initialized"
    },
    {
      "code": 6020,
      "name": "PoolNotFound",
      "msg": "Pool not found"
    },
    {
      "code": 6021,
      "name": "OrderNotFound",
      "msg": "Order not found"
    },
    {
      "code": 6022,
      "name": "OrderAlreadyFilled",
      "msg": "Order already filled"
    },
    {
      "code": 6023,
      "name": "OrderExpired",
      "msg": "Order expired"
    },
    {
      "code": 6024,
      "name": "OrderNotExpired",
      "msg": "Order not expired yet"
    },
    {
      "code": 6025,
      "name": "InvalidOrderTerms",
      "msg": "Invalid order terms"
    },
    {
      "code": 6026,
      "name": "AmmPoolNotFound",
      "msg": "AMM pool not found"
    },
    {
      "code": 6027,
      "name": "TokensNotInCanonicalOrder",
      "msg": "Tokens must be in canonical order (token_a < token_b by bytes)"
    },
    {
      "code": 6028,
      "name": "SlippageExceeded",
      "msg": "Slippage exceeded"
    },
    {
      "code": 6029,
      "name": "InsufficientLiquidity",
      "msg": "Insufficient liquidity"
    },
    {
      "code": 6030,
      "name": "InvalidPoolState",
      "msg": "Invalid pool state transition"
    },
    {
      "code": 6031,
      "name": "InvariantViolated",
      "msg": "Constant product invariant violated"
    },
    {
      "code": 6032,
      "name": "InvalidLpAmount",
      "msg": "Invalid LP token amount - must match calculated amount"
    },
    {
      "code": 6033,
      "name": "AggregationNotFound",
      "msg": "Aggregation not found"
    },
    {
      "code": 6034,
      "name": "AggregationNotActive",
      "msg": "Aggregation not active"
    },
    {
      "code": 6035,
      "name": "AggregationDeadlinePassed",
      "msg": "Aggregation deadline passed"
    },
    {
      "code": 6036,
      "name": "AlreadyVoted",
      "msg": "Already voted on this proposal"
    },
    {
      "code": 6037,
      "name": "InvalidVoteOption",
      "msg": "Invalid vote option"
    },
    {
      "code": 6038,
      "name": "DecryptionNotComplete",
      "msg": "Decryption not complete"
    },
    {
      "code": 6039,
      "name": "InvalidDecryptionShare",
      "msg": "Invalid decryption share"
    },
    {
      "code": 6040,
      "name": "ThresholdNotMet",
      "msg": "Threshold not met"
    },
    {
      "code": 6041,
      "name": "AdapterNotRegistered",
      "msg": "Adapter module not registered"
    },
    {
      "code": 6042,
      "name": "AdapterDisabled",
      "msg": "Adapter module disabled"
    },
    {
      "code": 6043,
      "name": "AdapterExecutionFailed",
      "msg": "Adapter execution failed"
    },
    {
      "code": 6044,
      "name": "Unauthorized",
      "msg": "Unauthorized"
    },
    {
      "code": 6045,
      "name": "InvalidVerificationKey",
      "msg": "Invalid verification key"
    },
    {
      "code": 6046,
      "name": "VerificationKeyNotFound",
      "msg": "Verification key not found"
    },
    {
      "code": 6047,
      "name": "CommitteeNotFound",
      "msg": "Committee not found"
    },
    {
      "code": 6048,
      "name": "NotCommitteeMember",
      "msg": "Not a committee member"
    },
    {
      "code": 6049,
      "name": "InvalidEncryptedNote",
      "msg": "Invalid encrypted note"
    },
    {
      "code": 6050,
      "name": "DecryptionFailed",
      "msg": "Decryption failed"
    },
    {
      "code": 6051,
      "name": "InvalidCiphertext",
      "msg": "Invalid ciphertext"
    },
    {
      "code": 6052,
      "name": "LightProtocolError",
      "msg": "Light Protocol CPI failed"
    },
    {
      "code": 6053,
      "name": "LightCpiError",
      "msg": "Light Protocol CPI operation failed"
    },
    {
      "code": 6054,
      "name": "NullifierTreeError",
      "msg": "Nullifier tree error"
    },
    {
      "code": 6055,
      "name": "NullifierInsertionFailed",
      "msg": "Failed to insert nullifier"
    },
    {
      "code": 6056,
      "name": "NullifierAlreadySpent",
      "msg": "Nullifier has already been spent (compressed account exists)"
    },
    {
      "code": 6057,
      "name": "ActionNullifierAlreadyUsed",
      "msg": "Action nullifier has already been used (already voted)"
    },
    {
      "code": 6058,
      "name": "CommitmentCreationFailed",
      "msg": "Failed to create commitment compressed account"
    },
    {
      "code": 6059,
      "name": "CommitmentProofFailed",
      "msg": "Commitment merkle proof verification failed"
    },
    {
      "code": 6060,
      "name": "PoseidonHashError",
      "msg": "Poseidon hash computation failed"
    },
    {
      "code": 6061,
      "name": "InvalidProofLength",
      "msg": "Invalid proof length"
    },
    {
      "code": 6062,
      "name": "Bn254MulError",
      "msg": "BN254 scalar multiplication failed"
    },
    {
      "code": 6063,
      "name": "Bn254AddError",
      "msg": "BN254 point addition failed"
    },
    {
      "code": 6064,
      "name": "Bn254PairingError",
      "msg": "BN254 pairing check failed"
    },
    {
      "code": 6065,
      "name": "AdapterSwapFailed",
      "msg": "Adapter swap execution failed"
    },
    {
      "code": 6066,
      "name": "TooManyPendingCommitments",
      "msg": "Too many pending commitments"
    },
    {
      "code": 6067,
      "name": "PendingOperationExpired",
      "msg": "Pending operation has expired"
    },
    {
      "code": 6068,
      "name": "PendingOperationNotComplete",
      "msg": "Pending operation not complete or expired"
    },
    {
      "code": 6069,
      "name": "InvalidCommitmentIndex",
      "msg": "Invalid commitment index"
    },
    {
      "code": 6070,
      "name": "CommitmentAlreadyCreated",
      "msg": "Commitment already created"
    },
    {
      "code": 6071,
      "name": "PoolMismatch",
      "msg": "Pool mismatch for commitment"
    },
    {
      "code": 6072,
      "name": "InvalidRelayer",
      "msg": "Invalid relayer for pending operation"
    },
    {
      "code": 6073,
      "name": "InvalidNullifierIndex",
      "msg": "Invalid nullifier index"
    },
    {
      "code": 6074,
      "name": "NullifierAlreadyCreated",
      "msg": "Nullifier already created"
    },
    {
      "code": 6075,
      "name": "NullifiersNotComplete",
      "msg": "Not all nullifiers have been created yet"
    },
    {
      "code": 6076,
      "name": "NullifiersNotCreated",
      "msg": "Nullifiers have not been created - required before processing unshield"
    },
    {
      "code": 6077,
      "name": "ProofNotVerified",
      "msg": "ZK proof has not been verified - Phase 0 required"
    },
    {
      "code": 6078,
      "name": "CommitmentNotVerified",
      "msg": "Commitment existence has not been verified - Phase 1 required"
    },
    {
      "code": 6079,
      "name": "CommitmentAlreadyVerified",
      "msg": "Commitment has already been verified"
    },
    {
      "code": 6080,
      "name": "NullifierNotCreated",
      "msg": "Nullifier has not been created - Phase 2 required"
    },
    {
      "code": 6081,
      "name": "Deprecated",
      "msg": "This instruction is deprecated - use append pattern instead"
    }
  ],
  "types": [
    {
      "name": "AdaptModule",
      "docs": [
        "Registered adapter module"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "program_id",
            "docs": [
              "Adapter program address"
            ],
            "type": "pubkey"
          },
          {
            "name": "interface_version",
            "docs": [
              "Interface version (for compatibility)"
            ],
            "type": "u8"
          },
          {
            "name": "enabled",
            "docs": [
              "Is enabled"
            ],
            "type": "bool"
          },
          {
            "name": "authority",
            "docs": [
              "Authority who can manage"
            ],
            "type": "pubkey"
          },
          {
            "name": "registered_at",
            "docs": [
              "Registration timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "Aggregation",
      "docs": [
        "Voting aggregation"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "id",
            "docs": [
              "Unique identifier"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "threshold_pubkey",
            "docs": [
              "Threshold public key (combined from committee)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "token_mint",
            "docs": [
              "Token mint for voting power"
            ],
            "type": "pubkey"
          },
          {
            "name": "num_options",
            "docs": [
              "Number of voting options"
            ],
            "type": "u8"
          },
          {
            "name": "threshold",
            "docs": [
              "Threshold required for decryption (t of n)"
            ],
            "type": "u8"
          },
          {
            "name": "deadline",
            "docs": [
              "Voting deadline"
            ],
            "type": "i64"
          },
          {
            "name": "action_domain",
            "docs": [
              "Action domain for nullifiers (prevents cross-proposal voting)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "encrypted_tallies",
            "docs": [
              "Encrypted vote tallies (one ElGamal ciphertext per option)",
              "These are homomorphically summed as votes come in"
            ],
            "type": {
              "vec": {
                "defined": {
                  "name": "ElGamalCiphertext"
                }
              }
            }
          },
          {
            "name": "decryption_shares",
            "docs": [
              "Decryption shares submitted by committee members"
            ],
            "type": {
              "vec": {
                "defined": {
                  "name": "DecryptionShare"
                }
              }
            }
          },
          {
            "name": "totals",
            "docs": [
              "Final decrypted totals (None until finalized)"
            ],
            "type": {
              "vec": "u64"
            }
          },
          {
            "name": "status",
            "docs": [
              "Status"
            ],
            "type": {
              "defined": {
                "name": "AggregationStatus"
              }
            }
          },
          {
            "name": "created_at",
            "docs": [
              "Creation timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "AggregationStatus",
      "docs": [
        "Aggregation status"
      ],
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Active"
          },
          {
            "name": "DecryptionInProgress"
          },
          {
            "name": "Finalized"
          }
        ]
      }
    },
    {
      "name": "AmmPool",
      "docs": [
        "AMM pool for a token pair"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "pool_id",
            "docs": [
              "Pool ID (PDA seed)"
            ],
            "type": "pubkey"
          },
          {
            "name": "token_a_mint",
            "docs": [
              "Token A mint"
            ],
            "type": "pubkey"
          },
          {
            "name": "token_b_mint",
            "docs": [
              "Token B mint"
            ],
            "type": "pubkey"
          },
          {
            "name": "lp_mint",
            "docs": [
              "LP token mint (created by pool)"
            ],
            "type": "pubkey"
          },
          {
            "name": "state_hash",
            "docs": [
              "Current state hash (hash of reserves + lp_supply)",
              "Used for ZK proof verification of state transitions"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "reserve_a",
            "docs": [
              "Reserve A (committed, updated via ZK proofs)"
            ],
            "type": "u64"
          },
          {
            "name": "reserve_b",
            "docs": [
              "Reserve B (committed, updated via ZK proofs)"
            ],
            "type": "u64"
          },
          {
            "name": "lp_supply",
            "docs": [
              "Total LP token supply"
            ],
            "type": "u64"
          },
          {
            "name": "fee_bps",
            "docs": [
              "Fee in basis points (e.g., 30 = 0.3%)"
            ],
            "type": "u16"
          },
          {
            "name": "authority",
            "docs": [
              "Pool authority"
            ],
            "type": "pubkey"
          },
          {
            "name": "is_active",
            "docs": [
              "Is pool active"
            ],
            "type": "bool"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump"
            ],
            "type": "u8"
          },
          {
            "name": "lp_mint_bump",
            "docs": [
              "LP mint bump"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "DecryptionShare",
      "docs": [
        "Decryption share from a committee member"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "party",
            "docs": [
              "Committee member who submitted"
            ],
            "type": "pubkey"
          },
          {
            "name": "shares",
            "docs": [
              "Decryption shares (one per option)"
            ],
            "type": {
              "vec": {
                "array": [
                  "u8",
                  32
                ]
              }
            }
          },
          {
            "name": "dleq_proofs",
            "docs": [
              "DLEQ proofs for correctness"
            ],
            "type": {
              "vec": "bytes"
            }
          }
        ]
      }
    },
    {
      "name": "ElGamalCiphertext",
      "docs": [
        "ElGamal ciphertext (C1, C2)"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "c1",
            "docs": [
              "C1 = r * G (32 bytes x, 32 bytes y compressed to 32)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "c2",
            "docs": [
              "C2 = m * G + r * P"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          }
        ]
      }
    },
    {
      "name": "LightAdaptParams",
      "docs": [
        "Parameters for Light Protocol operations"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "nullifier_proof",
            "docs": [
              "Validity proof for nullifier (proves it doesn't exist)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "nullifier_address_tree_info",
            "docs": [
              "Address tree info for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "commitment_proof",
            "docs": [
              "Validity proof for output commitment"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "commitment_address_tree_info",
            "docs": [
              "Address tree info for commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightAddressTreeInfo",
      "docs": [
        "IDL-safe wrapper for Light Protocol address tree info",
        "",
        "Contains tree configuration for compressed account address derivation."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "address_merkle_tree_pubkey_index",
            "docs": [
              "Index of the address merkle tree pubkey in remaining_accounts"
            ],
            "type": "u8"
          },
          {
            "name": "address_queue_pubkey_index",
            "docs": [
              "Index of the address queue pubkey in remaining_accounts"
            ],
            "type": "u8"
          },
          {
            "name": "root_index",
            "docs": [
              "Root index for the merkle tree"
            ],
            "type": "u16"
          }
        ]
      }
    },
    {
      "name": "LightCancelOrderParams",
      "docs": [
        "Parameters for Light Protocol operations"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "nullifier_proof",
            "docs": [
              "Validity proof for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "nullifier_address_tree_info",
            "docs": [
              "Address tree info for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "commitment_proof",
            "docs": [
              "Validity proof for refund commitment"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "commitment_address_tree_info",
            "docs": [
              "Address tree info for refund commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightCommitmentParams",
      "docs": [
        "Parameters for Light Protocol commitment creation"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "validity_proof",
            "docs": [
              "Validity proof from Helius indexer"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "address_tree_info",
            "docs": [
              "Address tree info for compressed account address derivation"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index for the new compressed account"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightCreateCommitmentParams",
      "docs": [
        "Parameters for Light Protocol commitment creation"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "proof",
            "docs": [
              "Validity proof for commitment"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "address_tree_info",
            "docs": [
              "Address tree info for commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightCreateNullifierAndPendingParams",
      "docs": [
        "Parameters for Light Protocol nullifier creation"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "proof",
            "docs": [
              "Validity proof for nullifier (non-inclusion proof)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "address_tree_info",
            "docs": [
              "Address tree info for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightCreateNullifierParams",
      "docs": [
        "Parameters for Light Protocol nullifier creation"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "proof",
            "docs": [
              "Validity proof for nullifier (non-inclusion proof)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "address_tree_info",
            "docs": [
              "Address tree info for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightFillOrderParams",
      "docs": [
        "Parameters for Light Protocol operations in fill order"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "escrow_nullifier_proof",
            "docs": [
              "Validity proof for escrow nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "escrow_nullifier_address_tree_info",
            "docs": [
              "Address tree info for escrow nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "taker_nullifier_proof",
            "docs": [
              "Validity proof for taker nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "taker_nullifier_address_tree_info",
            "docs": [
              "Address tree info for taker nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "maker_commitment_proof",
            "docs": [
              "Validity proof for maker output commitment"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "maker_commitment_address_tree_info",
            "docs": [
              "Address tree info for maker output commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "taker_commitment_proof",
            "docs": [
              "Validity proof for taker output commitment"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "taker_commitment_address_tree_info",
            "docs": [
              "Address tree info for taker output commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightOrderParams",
      "docs": [
        "Parameters for Light Protocol operations"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "nullifier_proof",
            "docs": [
              "Validity proof for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "nullifier_address_tree_info",
            "docs": [
              "Address tree info for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "commitment_proof",
            "docs": [
              "Validity proof for commitment"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "commitment_address_tree_info",
            "docs": [
              "Address tree info for commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightTransactParams",
      "docs": [
        "Parameters for transact Phase 1",
        "SECURITY CRITICAL: Verifies commitment exists + creates nullifier"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "commitment_account_hash",
            "docs": [
              "Account hash of input commitment (for verification)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "commitment_merkle_context",
            "docs": [
              "Merkle context proving commitment exists in state tree"
            ],
            "type": {
              "defined": {
                "name": "cloakcraft::instructions::pool::transact::CommitmentMerkleContext"
              }
            }
          },
          {
            "name": "commitment_inclusion_proof",
            "docs": [
              "Commitment inclusion proof (SECURITY: proves commitment EXISTS)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "commitment_address_tree_info",
            "docs": [
              "Address tree info for commitment verification"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "nullifier_non_inclusion_proof",
            "docs": [
              "Nullifier non-inclusion proof (proves nullifier doesn't exist yet)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "nullifier_address_tree_info",
            "docs": [
              "Address tree info for nullifier creation"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index for new nullifier account"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "LightValidityProof",
      "docs": [
        "IDL-safe wrapper for Light Protocol validity proof",
        "",
        "Contains the serialized proof data that can be deserialized",
        "into a ValidityProof for Light CPI operations."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "a",
            "docs": [
              "Compressed proof point A (32 bytes)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "b",
            "docs": [
              "Compressed proof point B (64 bytes)"
            ],
            "type": {
              "array": [
                "u8",
                64
              ]
            }
          },
          {
            "name": "c",
            "docs": [
              "Compressed proof point C (32 bytes)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          }
        ]
      }
    },
    {
      "name": "LightVerifyCommitmentParams",
      "docs": [
        "Parameters for commitment inclusion verification"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "commitment_account_hash",
            "docs": [
              "Account hash of commitment to verify"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "commitment_merkle_context",
            "docs": [
              "Merkle context proving commitment exists"
            ],
            "type": {
              "defined": {
                "name": "cloakcraft::instructions::generic::verify_commitment_exists::CommitmentMerkleContext"
              }
            }
          },
          {
            "name": "commitment_inclusion_proof",
            "docs": [
              "Inclusion proof for commitment (from getInclusionProofByHash)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "commitment_address_tree_info",
            "docs": [
              "Address tree info for commitment"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          }
        ]
      }
    },
    {
      "name": "LightVoteParams",
      "docs": [
        "Parameters for Light Protocol nullifier storage"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "nullifier_proof",
            "docs": [
              "Validity proof for action nullifier (proves it doesn't exist)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "nullifier_address_tree_info",
            "docs": [
              "Address tree info for nullifier"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "Order",
      "docs": [
        "Market order (escrow)"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "order_id",
            "docs": [
              "Unique order ID (derived from nullifier + terms)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "escrow_commitment",
            "docs": [
              "Escrow commitment (locked maker funds)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "terms_hash",
            "docs": [
              "Hash of order terms (offer_token, offer_amount, ask_token, ask_amount, maker_receive)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "encrypted_escrow",
            "docs": [
              "Encrypted escrow note (for maker to decrypt)"
            ],
            "type": "bytes"
          },
          {
            "name": "expiry",
            "docs": [
              "Expiry timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "status",
            "docs": [
              "Order status"
            ],
            "type": {
              "defined": {
                "name": "OrderStatus"
              }
            }
          },
          {
            "name": "created_at",
            "docs": [
              "Creation timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "OrderStatus",
      "docs": [
        "Order status"
      ],
      "type": {
        "kind": "enum",
        "variants": [
          {
            "name": "Open"
          },
          {
            "name": "Filled"
          },
          {
            "name": "Cancelled"
          }
        ]
      }
    },
    {
      "name": "PendingOperation",
      "docs": [
        "Pending operation for multi-phase commit with append pattern",
        "",
        "SECURITY: Append pattern binds all phases together",
        "Phase 0: Verify ZK proof  stores input_commitment, nullifier, outputs",
        "Phase 1: Verify commitment exists  must match input_commitment from Phase 0",
        "Phase 2: Create nullifier  must match nullifier from Phase 0",
        "Phase 3+: Execute operation  requires all verifications complete",
        "",
        "This prevents commitment/nullifier swap attacks.",
        "",
        "DESIGN CHOICE: Store randomness instead of encrypted notes",
        "- Encrypted notes = ~200 bytes per output (10 outputs = 2000 bytes!)",
        "- Randomness = 32 bytes per output (10 outputs = 320 bytes)",
        "- Savings: 1680 bytes (~0.012 SOL temporary rent reduction)",
        "",
        "Trade-off: Must regenerate encrypted notes if Phase 4 fails",
        "- Normal case: Generate once in Phase 4, no regeneration needed",
        "- Failure case: SDK reads randomness from PDA, regenerates encrypted notes",
        "- Compute is cheap, storage is expensive on Solana"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "bump",
            "docs": [
              "Bump seed for PDA derivation"
            ],
            "type": "u8"
          },
          {
            "name": "operation_id",
            "docs": [
              "Operation ID (unique per operation, derived from inputs)"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "relayer",
            "docs": [
              "Relayer who initiated the operation"
            ],
            "type": "pubkey"
          },
          {
            "name": "operation_type",
            "docs": [
              "Operation type (not used for logic, only for logging/debugging)"
            ],
            "type": "u8"
          },
          {
            "name": "proof_verified",
            "docs": [
              "SECURITY: State machine flags (prevent phase skipping)",
              "Phase 0 sets proof_verified"
            ],
            "type": "bool"
          },
          {
            "name": "input_commitments",
            "docs": [
              "SECURITY: Input commitment from ZK proof (binds Phase 0 to Phase 1)",
              "Phase 0 extracts from proof public inputs",
              "Phase 1 must verify THIS exact commitment",
              "For single-input operations (swap, remove_liquidity): Uses index 0",
              "For multi-input operations (add_liquidity): Uses indices 0 and 1"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                3
              ]
            }
          },
          {
            "name": "expected_nullifiers",
            "docs": [
              "SECURITY: Expected nullifiers from ZK proof (binds Phase 0 to Phase 2)",
              "Phase 0 extracts from proof public inputs",
              "Phase 2 must create THIS exact nullifier",
              "Matches input_commitments indices"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                3
              ]
            }
          },
          {
            "name": "input_pools",
            "docs": [
              "SECURITY: Input pools for each input commitment (binds Phase 1/2 to correct pool)",
              "Phase 0 stores which pool each input commitment belongs to",
              "Phase 1 must verify commitment EXISTS in THIS exact pool",
              "Phase 2 must create nullifier in THIS exact pool",
              "This prevents pool confusion attacks in multi-pool operations (e.g., swap)",
              "Matches input_commitments and expected_nullifiers indices"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                3
              ]
            }
          },
          {
            "name": "num_inputs",
            "docs": [
              "Number of input commitments to verify (1 for swap/remove, 2 for add_liquidity)"
            ],
            "type": "u8"
          },
          {
            "name": "inputs_verified_mask",
            "docs": [
              "Bitmask tracking which input commitments have been verified",
              "Bit i = 1 means input_commitments[i] was verified"
            ],
            "type": "u8"
          },
          {
            "name": "nullifier_completed_mask",
            "docs": [
              "Which nullifiers have been created (bitmask)",
              "Uses same indices as expected_nullifiers array"
            ],
            "type": "u8"
          },
          {
            "name": "num_commitments",
            "docs": [
              "Number of pending commitments"
            ],
            "type": "u8"
          },
          {
            "name": "pools",
            "docs": [
              "Pools for each commitment"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                8
              ]
            }
          },
          {
            "name": "commitments",
            "docs": [
              "Commitment hashes"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                8
              ]
            }
          },
          {
            "name": "leaf_indices",
            "docs": [
              "Leaf indices for each commitment"
            ],
            "type": {
              "array": [
                "u64",
                8
              ]
            }
          },
          {
            "name": "stealth_ephemeral_pubkeys",
            "docs": [
              "Stealth ephemeral pubkeys (64 bytes each: X + Y coordinates)",
              "Used by scanner to derive stealth private key for decryption"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    64
                  ]
                },
                8
              ]
            }
          },
          {
            "name": "output_recipients",
            "docs": [
              "Output recipients (stealth public key X coordinate)",
              "Used to regenerate encrypted notes"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                8
              ]
            }
          },
          {
            "name": "output_amounts",
            "docs": [
              "Output amounts",
              "Used to regenerate encrypted notes"
            ],
            "type": {
              "array": [
                "u64",
                8
              ]
            }
          },
          {
            "name": "output_randomness",
            "docs": [
              "Output randomness (from ZK proof)",
              "CRITICAL: Used to regenerate encrypted notes",
              "Must match what was used in commitment computation"
            ],
            "type": {
              "array": [
                {
                  "array": [
                    "u8",
                    32
                  ]
                },
                8
              ]
            }
          },
          {
            "name": "completed_mask",
            "docs": [
              "Which commitments have been created (bitmask)"
            ],
            "type": "u8"
          },
          {
            "name": "expires_at",
            "docs": [
              "Expiry timestamp (operation expires after this)"
            ],
            "type": "i64"
          },
          {
            "name": "created_at",
            "docs": [
              "Creation timestamp"
            ],
            "type": "i64"
          },
          {
            "name": "swap_amount",
            "docs": [
              "Swap: Input amount being swapped",
              "Add Liquidity: Token A deposit amount",
              "Remove Liquidity: LP tokens burned"
            ],
            "type": "u64"
          },
          {
            "name": "output_amount",
            "docs": [
              "Swap: Output amount received",
              "Add Liquidity: Token B deposit amount",
              "Remove Liquidity: Token A withdrawn"
            ],
            "type": "u64"
          },
          {
            "name": "extra_amount",
            "docs": [
              "Swap: unused",
              "Add Liquidity: LP tokens minted",
              "Remove Liquidity: Token B withdrawn"
            ],
            "type": "u64"
          },
          {
            "name": "swap_a_to_b",
            "docs": [
              "Swap: Direction (1 = A->B, 0 = B->A)",
              "Add Liquidity: unused",
              "Remove Liquidity: unused"
            ],
            "type": "bool"
          },
          {
            "name": "fee_amount",
            "docs": [
              "Protocol fee amount (verified in ZK proof)",
              "Transfer/Unshield: Fee deducted from transfer amount",
              "Swap: Fee deducted from swap output",
              "Remove Liquidity: Fee deducted from withdrawal"
            ],
            "type": "u64"
          },
          {
            "name": "unshield_amount",
            "docs": [
              "Unshield amount (for process_unshield phase)"
            ],
            "type": "u64"
          },
          {
            "name": "fee_processed",
            "docs": [
              "Whether fee has been processed (transferred to treasury)"
            ],
            "type": "bool"
          }
        ]
      }
    },
    {
      "name": "Pool",
      "docs": [
        "Shielded pool for a single token",
        "",
        "Note: Merkle tree state (commitments, roots) is now stored in Light Protocol",
        "compressed accounts. The PoolCommitmentCounter tracks leaf indices."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "token_mint",
            "docs": [
              "SPL token mint address"
            ],
            "type": "pubkey"
          },
          {
            "name": "token_vault",
            "docs": [
              "PDA holding shielded tokens"
            ],
            "type": "pubkey"
          },
          {
            "name": "total_shielded",
            "docs": [
              "Total value locked (for analytics)"
            ],
            "type": "u64"
          },
          {
            "name": "authority",
            "docs": [
              "Pool authority (for upgrades)"
            ],
            "type": "pubkey"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump seed"
            ],
            "type": "u8"
          },
          {
            "name": "vault_bump",
            "docs": [
              "Vault bump seed"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "PoolCommitmentCounter",
      "docs": [
        "Pool commitment counter - tracks next leaf index",
        "",
        "This is a regular PDA (not compressed) that tracks the",
        "next available leaf index for each pool. Needed for",
        "sequential leaf index assignment."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "pool",
            "docs": [
              "Pool this counter belongs to"
            ],
            "type": "pubkey"
          },
          {
            "name": "next_leaf_index",
            "docs": [
              "Next available leaf index"
            ],
            "type": "u64"
          },
          {
            "name": "total_commitments",
            "docs": [
              "Total commitments created"
            ],
            "type": "u64"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump seed"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "ProtocolConfig",
      "docs": [
        "Protocol configuration account",
        "",
        "Stores fee rates in basis points (10000 = 100%) and treasury address.",
        "Fee rates can be updated by the authority."
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "authority",
            "docs": [
              "Authority that can update fees"
            ],
            "type": "pubkey"
          },
          {
            "name": "treasury",
            "docs": [
              "Treasury account that receives protocol fees"
            ],
            "type": "pubkey"
          },
          {
            "name": "transfer_fee_bps",
            "docs": [
              "Transfer fee in basis points (e.g., 10 = 0.1%)",
              "Applied to private  private transfers"
            ],
            "type": "u16"
          },
          {
            "name": "unshield_fee_bps",
            "docs": [
              "Unshield fee in basis points (e.g., 25 = 0.25%)",
              "Applied to private  public withdrawals"
            ],
            "type": "u16"
          },
          {
            "name": "swap_fee_bps",
            "docs": [
              "Swap fee in basis points (e.g., 30 = 0.3%)",
              "Applied to private AMM swaps"
            ],
            "type": "u16"
          },
          {
            "name": "remove_liquidity_fee_bps",
            "docs": [
              "Remove liquidity fee in basis points (e.g., 25 = 0.25%)",
              "Applied to LP token withdrawals"
            ],
            "type": "u16"
          },
          {
            "name": "fees_enabled",
            "docs": [
              "Whether fees are enabled (can be paused)"
            ],
            "type": "bool"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump seed"
            ],
            "type": "u8"
          },
          {
            "name": "_reserved",
            "docs": [
              "Reserved for future use"
            ],
            "type": {
              "array": [
                "u8",
                62
              ]
            }
          }
        ]
      }
    },
    {
      "name": "StoreCommitmentParams",
      "docs": [
        "Parameters for storing a single commitment"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "commitment",
            "docs": [
              "The commitment hash"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "leaf_index",
            "docs": [
              "Leaf index (read from commitment counter before transact)"
            ],
            "type": "u64"
          },
          {
            "name": "stealth_ephemeral_pubkey",
            "docs": [
              "Stealth ephemeral pubkey for deriving decryption key (64 bytes: X + Y)",
              "If all zeros, decrypt with original spending key (internal operations)"
            ],
            "type": {
              "array": [
                "u8",
                64
              ]
            }
          },
          {
            "name": "encrypted_note",
            "docs": [
              "Encrypted note data (Vec to avoid heap issues during deserialization)"
            ],
            "type": "bytes"
          },
          {
            "name": "validity_proof",
            "docs": [
              "Validity proof for the commitment address (non-inclusion)"
            ],
            "type": {
              "defined": {
                "name": "LightValidityProof"
              }
            }
          },
          {
            "name": "address_tree_info",
            "docs": [
              "Address tree info"
            ],
            "type": {
              "defined": {
                "name": "LightAddressTreeInfo"
              }
            }
          },
          {
            "name": "output_tree_index",
            "docs": [
              "Output state tree index"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "ThresholdCommittee",
      "docs": [
        "Threshold committee"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "committee_id",
            "docs": [
              "Committee identifier"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "threshold_pubkey",
            "docs": [
              "Combined threshold public key"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "members",
            "docs": [
              "Committee members"
            ],
            "type": {
              "vec": "pubkey"
            }
          },
          {
            "name": "threshold",
            "docs": [
              "Threshold (t of n)"
            ],
            "type": "u8"
          },
          {
            "name": "authority",
            "docs": [
              "Authority who can manage"
            ],
            "type": "pubkey"
          },
          {
            "name": "is_active",
            "docs": [
              "Is active"
            ],
            "type": "bool"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "VerificationKey",
      "docs": [
        "Verification key for a circuit"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "circuit_id",
            "docs": [
              "Circuit identifier"
            ],
            "type": {
              "array": [
                "u8",
                32
              ]
            }
          },
          {
            "name": "vk_data",
            "docs": [
              "Groth16 verification key components (serialized)",
              "Format: alpha_g1 (64) + beta_g2 (128) + gamma_g2 (128) + delta_g2 (128) + ic_len (4) + ic (64 * ic_len)"
            ],
            "type": "bytes"
          },
          {
            "name": "authority",
            "docs": [
              "Authority who can update"
            ],
            "type": "pubkey"
          },
          {
            "name": "is_active",
            "docs": [
              "Is active"
            ],
            "type": "bool"
          },
          {
            "name": "bump",
            "docs": [
              "PDA bump"
            ],
            "type": "u8"
          }
        ]
      }
    },
    {
      "name": "cloakcraft::instructions::generic::verify_commitment_exists::CommitmentMerkleContext",
      "docs": [
        "Merkle context for commitment verification"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "merkle_tree_pubkey_index",
            "type": "u8"
          },
          {
            "name": "queue_pubkey_index",
            "type": "u8"
          },
          {
            "name": "leaf_index",
            "type": "u32"
          },
          {
            "name": "root_index",
            "type": "u16"
          }
        ]
      }
    },
    {
      "name": "cloakcraft::instructions::pool::transact::CommitmentMerkleContext",
      "docs": [
        "Merkle context for verifying commitment exists in state tree"
      ],
      "type": {
        "kind": "struct",
        "fields": [
          {
            "name": "merkle_tree_pubkey_index",
            "type": "u8"
          },
          {
            "name": "leaf_index",
            "type": "u32"
          },
          {
            "name": "root_index",
            "type": "u16"
          }
        ]
      }
    }
  ]
}